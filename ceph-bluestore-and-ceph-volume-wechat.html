<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <link rel="stylesheet" href="theme/css/wechat.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="theme/css/pygment.css" type="text/css" charset="utf-8">
  <style type="text/css">h1:hover a.anchor {text-decoration:none}
h2:hover a.anchor {text-decoration:none}
h3:hover a.anchor {text-decoration:none}
h4:hover a.anchor {text-decoration:none}
h5:hover a.anchor {text-decoration:none}
h6:hover a.anchor {text-decoration:none}
body > h1:first-child + h2 {margin-top:0;padding-top:0}
a:first-child h1 {margin-top:0;padding-top:0}
a:first-child h2 {margin-top:0;padding-top:0}
a:first-child h3 {margin-top:0;padding-top:0}
a:first-child h4 {margin-top:0;padding-top:0}
a:first-child h5 {margin-top:0;padding-top:0}
a:first-child h6 {margin-top:0;padding-top:0}
table tr:nth-child(2n) {background-color:#f8f8f8}</style>
</head>
  <body style='background-color:white; color:#333; font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; line-height:1.6; margin:0 auto; padding:30px; padding-bottom:10px; padding-top:10px; width:854px' bgcolor="white" width="854">
    <h2 id="_1" style="cursor:text; font-weight:bold; margin:20px 0 10px; padding:2px 0 0 10px; position:relative; border-left:solid 8px #299480; color:#3AAA7D; font-size:22px; line-height:1.6; margin-top:0; padding-top:0">部署</h2>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>使用环境</p>
<ul style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em; padding-left:30px'>
<li style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em; margin-top:0'>单节点</li>
<li style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em'>CentOS 7.4</li>
<li style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em'>使用 ceph-deploy 进行部署</li>
</ul>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>准备 centos 7.4 系统的机器，并配置好 ssh 的无密码登录</p>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>安装 ceph-deploy</p>
<pre class="highlight" style="color:rgb(33, 33, 33); font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; font-size:16px; margin:15px 0; min-height:1em; background-color:#f8f8f8; border:1px solid #ccc; border-radius:3px; line-height:19px; overflow:auto; padding:6px 10px" bgcolor="#f8f8f8"><code style="background-color:transparent; border:none; border-radius:4px; font-size:16px; margin:0; padding:0; background:transparent; font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; overflow-y:hidden">yum install https://download.ceph.com/rpm-luminous/el7/noarch/ceph-deploy-2.0.0-0.noarch.rpm</code></pre>


<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>数据 ceph 安装包</p>
<pre class="highlight" style="color:rgb(33, 33, 33); font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; font-size:16px; margin:15px 0; min-height:1em; background-color:#f8f8f8; border:1px solid #ccc; border-radius:3px; line-height:19px; overflow:auto; padding:6px 10px" bgcolor="#f8f8f8"><code style="background-color:transparent; border:none; border-radius:4px; font-size:16px; margin:0; padding:0; background:transparent; font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; overflow-y:hidden">mkdir ceph-install
cd ceph-install
ceph-deploy new node1</code></pre>


<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>把如下内容加入到 ceph.conf 里面，把默认的副本数据调成1。</p>
<pre class="highlight" style="color:rgb(33, 33, 33); font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; font-size:16px; margin:15px 0; min-height:1em; background-color:#f8f8f8; border:1px solid #ccc; border-radius:3px; line-height:19px; overflow:auto; padding:6px 10px" bgcolor="#f8f8f8"><code style="background-color:transparent; border:none; border-radius:4px; font-size:16px; margin:0; padding:0; background:transparent; font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; overflow-y:hidden">[global]
osd pool default size = 1
osd pool default min size = 1</code></pre>


<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>安装 ceph 包</p>
<pre class="highlight" style="color:rgb(33, 33, 33); font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; font-size:16px; margin:15px 0; min-height:1em; background-color:#f8f8f8; border:1px solid #ccc; border-radius:3px; line-height:19px; overflow:auto; padding:6px 10px" bgcolor="#f8f8f8"><code style="background-color:transparent; border:none; border-radius:4px; font-size:16px; margin:0; padding:0; background:transparent; font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; overflow-y:hidden"> ceph-deploy install --release luminous node2</code></pre>


<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>初始化 mon</p>
<pre class="highlight" style="color:rgb(33, 33, 33); font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; font-size:16px; margin:15px 0; min-height:1em; background-color:#f8f8f8; border:1px solid #ccc; border-radius:3px; line-height:19px; overflow:auto; padding:6px 10px" bgcolor="#f8f8f8"><code style="background-color:transparent; border:none; border-radius:4px; font-size:16px; margin:0; padding:0; background:transparent; font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; overflow-y:hidden">ceph-deploy mon create-initial
ceph-deploy admin node1</code></pre>


<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>这时 ceph 已经可以访问了</p>
<pre class="highlight" style="color:rgb(33, 33, 33); font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; font-size:16px; margin:15px 0; min-height:1em; background-color:#f8f8f8; border:1px solid #ccc; border-radius:3px; line-height:19px; overflow:auto; padding:6px 10px" bgcolor="#f8f8f8"><code style="background-color:transparent; border:none; border-radius:4px; font-size:16px; margin:0; padding:0; background:transparent; font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; overflow-y:hidden">$ ceph -s
  cluster:
    id:     5b2f0020-fc24-44de-a6c9-a88efdc5074f
  health: HEALTH_OK
  services:
    mon: 1 daemons, quorum node1
    mgr: no daemons active
    osd: 0 osds: 0 up, 0 in

  data:
    pools:   0 pools, 0 pgs
    objects: 0 objects, 0 bytes
    usage:   0 kB used, 0 kB / 0 kB avail
    pgs:</code></pre>


<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>接下来要部署 ceph mgr, 这个组件在 Luminous 里面是必装组件</p>
<pre class="highlight" style="color:rgb(33, 33, 33); font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; font-size:16px; margin:15px 0; min-height:1em; background-color:#f8f8f8; border:1px solid #ccc; border-radius:3px; line-height:19px; overflow:auto; padding:6px 10px" bgcolor="#f8f8f8"><code style="background-color:transparent; border:none; border-radius:4px; font-size:16px; margin:0; padding:0; background:transparent; font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; overflow-y:hidden">ceph-deploy  mgr create node1</code></pre>


<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>接下来部署 ceph osd, 现在推荐使用 ceph-volume lvm 来管理磁盘。所有安装的时候 ，就需要准备一个 lv 出来。为了测试 bluestore 的 block.db 和 block.wal， 我们来做三个lv 分别用于单 osd 。</p>
<pre class="highlight" style="color:rgb(33, 33, 33); font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; font-size:16px; margin:15px 0; min-height:1em; background-color:#f8f8f8; border:1px solid #ccc; border-radius:3px; line-height:19px; overflow:auto; padding:6px 10px" bgcolor="#f8f8f8"><code style="background-color:transparent; border:none; border-radius:4px; font-size:16px; margin:0; padding:0; background:transparent; font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; overflow-y:hidden">$ uuid=$(uuidgen)
20861703-1a01-415c-97c3-7e855cfb8994
$ pv create /dev/sdb
Physical volume "/dev/sdb" successfully created.
$ vgcreate ceph-$uuid /dev/sdb
Volume group "ceph-20861703-1a01-415c-97c3-7e855cfb8994" successfully created
$ lvcreate ceph-$uuid -L 1G -n osd.wal
Logical volume "osd.wal" created.
$ lvcreate ceph-$uuid -L 1G -n osd.db
Logical volume "osd.db" created.
$ lvcreate ceph-$uuid -l 100%FREE -n osd.block
Logical volume "osd.block" created.</code></pre>


<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>接下来，就可以创建 OSD 了。</p>
<pre class="highlight" style="color:rgb(33, 33, 33); font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; font-size:16px; margin:15px 0; min-height:1em; background-color:#f8f8f8; border:1px solid #ccc; border-radius:3px; line-height:19px; overflow:auto; padding:6px 10px" bgcolor="#f8f8f8"><code style="background-color:transparent; border:none; border-radius:4px; font-size:16px; margin:0; padding:0; background:transparent; font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; overflow-y:hidden">ceph-deploy osd create \
    --bluestore \
    --data ceph-$uuid/osd.block \
    --block.db ceph-$uuid/osd.db \
    --block.wal ceph-$uuid/osd.wal
    node1</code></pre>


<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>使用 ceph-volume 部署的方法如下</p>
<pre class="highlight" style="color:rgb(33, 33, 33); font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; font-size:16px; margin:15px 0; min-height:1em; background-color:#f8f8f8; border:1px solid #ccc; border-radius:3px; line-height:19px; overflow:auto; padding:6px 10px" bgcolor="#f8f8f8"><code style="background-color:transparent; border:none; border-radius:4px; font-size:16px; margin:0; padding:0; background:transparent; font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; overflow-y:hidden">uuid=$(uuidgen)

vgcreate ceph-$uuid /dev/sdb
lvcreate ceph-$uuid -L 1G -n osd.wal
lvcreate ceph-$uuid -L 1G -n osd.db
lvcreate ceph-$uuid -l 100%FREE -n osd.block

ceph-volume lvm create \
    --data ceph-$uuid/osd.block \
    --block.db ceph-$uuid/osd.db \
    --block.wal ceph-$uuid/osd.wal</code></pre>


<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>这样，一个最小的集群就建好了</p>
<pre class="highlight" style="color:rgb(33, 33, 33); font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; font-size:16px; margin:15px 0; min-height:1em; background-color:#f8f8f8; border:1px solid #ccc; border-radius:3px; line-height:19px; overflow:auto; padding:6px 10px" bgcolor="#f8f8f8"><code style="background-color:transparent; border:none; border-radius:4px; font-size:16px; margin:0; padding:0; background:transparent; font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; overflow-y:hidden">$ ceph -s
  cluster:
    id:     5b2f0020-fc24-44de-a6c9-a88efdc5074f
    health: HEALTH_OK

  services:
    mon: 1 daemons, quorum node1
    mgr: node2(active)
    osd: 1 osds: 1 up, 1 in

  data:
    pools:   0 pools, 0 pgs
    objects: 0 objects, 0 bytes
    usage:   2048 MB used, 37883 MB / 39931 MB avail
    pgs:

$ ls -alh /var/lib/ceph/osd/ceph-0/
total 52K
-rw-r--r-- 1 ceph ceph 409 Apr 12 03:05 activate.monmap
lrwxrwxrwx 1 ceph ceph  56 Apr 12 03:05 block -&gt; /dev/ceph-20861703-1a01-415c-97c3-7e855cfb8994/osd.block
lrwxrwxrwx 1 ceph ceph  53 Apr 12 03:05 block.db -&gt; /dev/ceph-20861703-1a01-415c-97c3-7e855cfb8994/osd.db
lrwxrwxrwx 1 ceph ceph  54 Apr 12 03:05 block.wal -&gt; /dev/ceph-20861703-1a01-415c-97c3-7e855cfb8994/osd.wal
-rw-r--r-- 1 ceph ceph   2 Apr 12 03:05 bluefs
-rw-r--r-- 1 ceph ceph  37 Apr 12 03:05 ceph_fsid
-rw-r--r-- 1 ceph ceph  37 Apr 12 03:05 fsid
-rw------- 1 ceph ceph  55 Apr 12 03:05 keyring
-rw-r--r-- 1 ceph ceph   8 Apr 12 03:05 kv_backend
-rw-r--r-- 1 ceph ceph  21 Apr 12 03:05 magic
-rw-r--r-- 1 ceph ceph   4 Apr 12 03:05 mkfs_done
-rw-r--r-- 1 ceph ceph  41 Apr 12 03:05 osd_key
-rw-r--r-- 1 ceph ceph   6 Apr 12 03:05 ready
-rw-r--r-- 1 ceph ceph   3 Apr 12 03:05 require_osd_release
-rw-r--r-- 1 ceph ceph  10 Apr 12 03:05 type
-rw-r--r-- 1 ceph ceph   2 Apr 12 03:05 whoami</code></pre>


<h2 id="bluestore-rocksdb-ceph-volume" style="cursor:text; font-weight:bold; margin:20px 0 10px; padding:2px 0 0 10px; position:relative; border-left:solid 8px #299480; color:#3AAA7D; font-size:22px; line-height:1.6">bluestore &amp; rocksdb &amp; ceph-volume</h2>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>ceph 的组件多采用插件的机制，包括后端存储，KV 数据库，磁盘管理等。各组件之间可以灵活的组合。</p>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>基于后端存储包括 filestore, kvstore，memstore 和新的 bluestore。 Ceph Luminous 引用了 bluestore 的存储类型，不依赖文件系统，直接管理物理磁盘，相比filestore, 在 io 写入的时候路径更短，也避免了二次写入的问题，性能会更加好。</p>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>KV 存储主要包括 LevelDB, MemDB 和新的 RocksDB。 RocksDB 是 Facebook 基于 LevelDB 开发的 key-value 数据，并对闪存(flash)有更友好的优化。</p>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>磁盘管理之前只有个 ceph-disk, 现在新引入了 ceph-volume。基于 lvm 来管理磁盘，并会逐渐废弃掉 ceph-disk。</p>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'><img alt="ceph-bluestore.png" src="images/2018/ceph-bluestore.png" style="max-width:100%"></p>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>基中比较有意思的是 RocksDB 的实现，RocksDB 原本只基于文件系统的。但是得益于它本身的灵活性，bluestore 实现了一套 RocksDB 的 Env 接口，还在 BlueStore 上面实现了一套 BlueFS 的接口与 BluestoreEnv 对接。使得 RocksDB 可以存储在 BlueStore 上面。</p>
<h2 id="wal-db" style="cursor:text; font-weight:bold; margin:20px 0 10px; padding:2px 0 0 10px; position:relative; border-left:solid 8px #299480; color:#3AAA7D; font-size:22px; line-height:1.6">wal &amp; db 的大小问题</h2>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>在 ceph bluestore 的情况下，wal 是 RocksDB 的 write-ahead log, 相当于之前的 journal 数据，db 是 RocksDB 的 metadata 信息。在磁盘选择原则是 block.wal &gt; block.db &gt; block。当然所有的数据也可以放到同一块盘上。</p>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>默认情况下， wal 和 db 的大小分别是 512 MB 和 1GB, 包括 Sage Weil 的 PPT 里面也是这样标明的<sup id="fnref:1" style="font-size:0.83em; line-height:0; vertical-align:super" valign="super"><a class="footnote-ref" href="#fn:1" rel="footnote" style="color:#4183C4; display:none">1</a></sup>。现在没有一个太好的理论值，它和 ceph 里面的每个 OSD 里面的对象个数有关系。更多讨论可以参看<sup id="fnref:2" style="font-size:0.83em; line-height:0; vertical-align:super" valign="super"><a class="footnote-ref" href="#fn:2" rel="footnote" style="color:#4183C4; display:none">2</a></sup>。 现在社区推荐的是 block size * 4% 的值。也就是说如果你的 block 盘大小是 1TB，那 block.db 的大小最少是 40GB。<sup id="fnref:4" style="font-size:0.83em; line-height:0; vertical-align:super" valign="super"><a class="footnote-ref" href="#fn:4" rel="footnote" style="color:#4183C4; display:none">4</a></sup><sup id="fnref:5" style="font-size:0.83em; line-height:0; vertical-align:super" valign="super"><a class="footnote-ref" href="#fn:5" rel="footnote" style="color:#4183C4; display:none">5</a></sup></p>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>值得注意的是，如果所有的数据都在单块盘上，那是没有必要指定 wal &amp; db 的大小的。如果 wal &amp; db 是在不同的盘上，由于 wal/db 一般都会分的比较小，是有满的可能性的。如果满了，这些数据会迁移到下一个快的盘上(wal - db - main)。所以最少不会因为数据满了，而造成无法写入<sup id="fnref:3" style="font-size:0.83em; line-height:0; vertical-align:super" valign="super"><a class="footnote-ref" href="#fn:3" rel="footnote" style="color:#4183C4; display:none">3</a></sup>。</p>
<h2 id="bluestore-osd" style="cursor:text; font-weight:bold; margin:20px 0 10px; padding:2px 0 0 10px; position:relative; border-left:solid 8px #299480; color:#3AAA7D; font-size:22px; line-height:1.6">使用 bluestore 时的 osd 分区</h2>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>如果是使用的 ceph-disk 管理磁盘，他会建立一个 100MB 的分区，来存放 keyring / whoami 这些信息，这和之前的逻辑是一样的。</p>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>如果是使用 ceph-volume 管理磁盘，<code style="background-color:#f8f8f8; border:1px solid #eaeaea; border-radius:4px; font-size:16px; margin:0 2px; padding:0 7px" bgcolor="#f8f8f8">/var/lib/ceph/osd/ceph-0</code> 分区会从 tmpfs 挂载过来(也就是内存)</p>
<pre class="highlight" style="color:rgb(33, 33, 33); font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; font-size:16px; margin:15px 0; min-height:1em; background-color:#f8f8f8; border:1px solid #ccc; border-radius:3px; line-height:19px; overflow:auto; padding:6px 10px" bgcolor="#f8f8f8"><code style="background-color:transparent; border:none; border-radius:4px; font-size:16px; margin:0; padding:0; background:transparent; font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; overflow-y:hidden">$ mount | grep osd
tmpfs on /var/lib/ceph/osd/ceph-0 type tmpfs (rw,relatime)
$ ls -Alh /var/lib/ceph/osd/ceph-0
-rw-r--r-- 1 ceph ceph 409 Apr 12 03:05 activate.monmap
lrwxrwxrwx 1 ceph ceph  56 Apr 12 03:05 block -&gt; /dev/ceph-20861703-1a01-415c-97c3-7e855cfb8994/osd.block
lrwxrwxrwx 1 ceph ceph  53 Apr 12 03:05 block.db -&gt; /dev/ceph-20861703-1a01-415c-97c3-7e855cfb8994/osd.db
lrwxrwxrwx 1 ceph ceph  54 Apr 12 03:05 block.wal -&gt; /dev/ceph-20861703-1a01-415c-97c3-7e855cfb8994/osd.wal
-rw-r--r-- 1 ceph ceph   2 Apr 12 03:05 bluefs
-rw-r--r-- 1 ceph ceph  37 Apr 12 03:05 ceph_fsid
-rw-r--r-- 1 ceph ceph  37 Apr 12 03:05 fsid
-rw------- 1 ceph ceph  55 Apr 12 03:05 keyring
-rw-r--r-- 1 ceph ceph   8 Apr 12 03:05 kv_backend
-rw-r--r-- 1 ceph ceph  21 Apr 12 03:05 magic
-rw-r--r-- 1 ceph ceph   4 Apr 12 03:05 mkfs_done
-rw-r--r-- 1 ceph ceph  41 Apr 12 03:05 osd_key
-rw-r--r-- 1 ceph ceph   6 Apr 12 03:05 ready
-rw-r--r-- 1 ceph ceph   3 Apr 12 03:05 require_osd_release
-rw-r--r-- 1 ceph ceph  10 Apr 12 03:05 type
-rw-r--r-- 1 ceph ceph   2 Apr 12 03:05 whoami</code></pre>


<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>至于目录中的这些文件则是从 bluestore 盘一开始的 <code style="background-color:#f8f8f8; border:1px solid #eaeaea; border-radius:4px; font-size:16px; margin:0 2px; padding:0 7px" bgcolor="#f8f8f8">BDEV_LABEL_BLOCK_SIZE=4096</code> 位置读取过来的。通过 以下命令，可以把所有的 label 打印出来</p>
<pre class="highlight" style="color:rgb(33, 33, 33); font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; font-size:16px; margin:15px 0; min-height:1em; background-color:#f8f8f8; border:1px solid #ccc; border-radius:3px; line-height:19px; overflow:auto; padding:6px 10px" bgcolor="#f8f8f8"><code style="background-color:transparent; border:none; border-radius:4px; font-size:16px; margin:0; padding:0; background:transparent; font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; overflow-y:hidden">ceph-bluestore-tool  show-label --path /var/lib/ceph/osd/ceph-0
inferring bluefs devices from bluestore path
{
    "/var/lib/ceph/osd/ceph-0/block": {
        "osd_uuid": "2a464466-e5f8-48c8-ae26-b26e12b887cc",
        "size": 19323158528,
        "btime": "2020-04-12 03:05:20.158229",
        "description": "main",
        "bluefs": "1",
        "ceph_fsid": "63050303-aeab-45e9-9ad5-da01ea3b6851",
        "kv_backend": "rocksdb",
        "magic": "ceph osd volume v026",
        "mkfs_done": "yes",
        "osd_key": "AQBthZJebBpGOxAA+Y+uVPfzSXpr++2HiiRP3A==",
        "ready": "ready",
        "require_osd_release": "12",
        "whoami": "0"
    },
    "/var/lib/ceph/osd/ceph-0/block.wal": {
        "osd_uuid": "2a464466-e5f8-48c8-ae26-b26e12b887cc",
        "size": 1073741824,
        "btime": "2020-04-12 03:05:20.172686",
        "description": "bluefs wal"
    },
    "/var/lib/ceph/osd/ceph-0/block.db": {
        "osd_uuid": "2a464466-e5f8-48c8-ae26-b26e12b887cc",
        "size": 1073741824,
        "btime": "2020-04-12 03:05:20.164547",
        "description": "bluefs db"
    }
}</code></pre>


<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>相关代码参看</p>
<ul style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em; padding-left:30px'>
<li style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em; margin-top:0'><a href="https://github.com/ceph/ceph/blob/d65b8844d16d71df01b57f368badc100db505506/src/ceph-volume/ceph_volume/devices/lvm/activate.py#L144" style="color:#4183C4; margin-top:0">ceph-volume activate</a></li>
<li style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em'><a href="https://github.com/ceph/ceph/blob/d65b8844d16d71df01b57f368badc100db505506/src/os/bluestore/bluestore_tool.cc#L316-L396" style="color:#4183C4; margin-top:0">ceph-bluestore-tool prime-osd-dir</a></li>
</ul>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>使用ceph-volume， 不管 store 使用的是 filestore 还是 bluestore, 都会把一些 tag 存在 lvm 上面， 可以使用以下命令查看(做了格式化处理)</p>
<pre class="highlight" style="color:rgb(33, 33, 33); font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; font-size:16px; margin:15px 0; min-height:1em; background-color:#f8f8f8; border:1px solid #ccc; border-radius:3px; line-height:19px; overflow:auto; padding:6px 10px" bgcolor="#f8f8f8"><code style="background-color:transparent; border:none; border-radius:4px; font-size:16px; margin:0; padding:0; background:transparent; font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; overflow-y:hidden">$ lvs -o lv_tags ceph-20861703-1a01-415c-97c3-7e855cfb8994
ceph.block_device=/dev/ceph-20861703-1a01-415c-97c3-7e855cfb8994/osd.block
ceph.block_uuid=tXAc95-eeqZ-rBuv-r25S-UX22-iNyN-ts9Mkc
ceph.cephx_lockbox_secret=
ceph.cluster_fsid=63050303-aeab-45e9-9ad5-da01ea3b6851
ceph.cluster_name=ceph
ceph.crush_device_class=None
ceph.db_device=/dev/ceph-20861703-1a01-415c-97c3-7e855cfb8994/osd.db
ceph.db_uuid=1ced0p-o0kk-Vx32-VUAQ-PlM1-pRpX-e3SXnm
ceph.encrypted=0
ceph.osd_fsid=2a464466-e5f8-48c8-ae26-b26e12b887cc
ceph.osd_id=0
ceph.type=block
ceph.vdo=0
ceph.wal_device=/dev/ceph-20861703-1a01-415c-97c3-7e855cfb8994/osd.wal
ceph.wal_uuid=vqTGDo-szoS-9DeJ-yDwt-OmuB-OG2N-r5SzvW

ceph.block_device=/dev/ceph-20861703-1a01-415c-97c3-7e855cfb8994/osd.block
ceph.block_uuid=tXAc95-eeqZ-rBuv-r25S-UX22-iNyN-ts9Mkc
ceph.cephx_lockbox_secret=
ceph.cluster_fsid=63050303-aeab-45e9-9ad5-da01ea3b6851
ceph.cluster_name=ceph
ceph.crush_device_class=None
ceph.db_device=/dev/ceph-20861703-1a01-415c-97c3-7e855cfb8994/osd.db
ceph.db_uuid=1ced0p-o0kk-Vx32-VUAQ-PlM1-pRpX-e3SXnm
ceph.encrypted=0
ceph.osd_fsid=2a464466-e5f8-48c8-ae26-b26e12b887cc
ceph.osd_id=0
ceph.type=db
ceph.vdo=0
ceph.wal_device=/dev/ceph-20861703-1a01-415c-97c3-7e855cfb8994/osd.wal
ceph.wal_uuid=vqTGDo-szoS-9DeJ-yDwt-OmuB-OG2N-r5SzvW

ceph.block_device=/dev/ceph-20861703-1a01-415c-97c3-7e855cfb8994/osd.block
ceph.block_uuid=tXAc95-eeqZ-rBuv-r25S-UX22-iNyN-ts9Mkc
ceph.cephx_lockbox_secret=
ceph.cluster_fsid=63050303-aeab-45e9-9ad5-da01ea3b6851
ceph.cluster_name=ceph
ceph.crush_device_class=None
ceph.encrypted=0
ceph.osd_fsid=2a464466-e5f8-48c8-ae26-b26e12b887cc
ceph.osd_id=0
ceph.type=wal
ceph.vdo=0
ceph.wal_device=/dev/ceph-20861703-1a01-415c-97c3-7e855cfb8994/osd.wal
ceph.wal_uuid=vqTGDo-szoS-9DeJ-yDwt-OmuB-OG2N-r5SzvW</code></pre>


<h2 id="osd" style="cursor:text; font-weight:bold; margin:20px 0 10px; padding:2px 0 0 10px; position:relative; border-left:solid 8px #299480; color:#3AAA7D; font-size:22px; line-height:1.6">osd 的盘是如何挂载的</h2>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>ceph 依赖 systemd 来管理挂载，不需要配置 <code style="background-color:#f8f8f8; border:1px solid #eaeaea; border-radius:4px; font-size:16px; margin:0 2px; padding:0 7px" bgcolor="#f8f8f8">/etc/fstab</code> 文件。在初始化 osd 的时候, ceph 会 enable 一个 ceph-volume@x.service 服务，其中 x 的格式如 <code style="background-color:#f8f8f8; border:1px solid #eaeaea; border-radius:4px; font-size:16px; margin:0 2px; padding:0 7px" bgcolor="#f8f8f8">{lvm|simple}-{osd id}-{osd uuid}</code>, 这个服务会在系统的<code style="background-color:#f8f8f8; border:1px solid #eaeaea; border-radius:4px; font-size:16px; margin:0 2px; padding:0 7px" bgcolor="#f8f8f8">local-fs.target</code> 组里面，当系统挂载本地盘的时候，会自动挂载上。</p>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>这个 ceph-volume@.service 定义如下</p>
<pre class="highlight" style="color:rgb(33, 33, 33); font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; font-size:16px; margin:15px 0; min-height:1em; background-color:#f8f8f8; border:1px solid #ccc; border-radius:3px; line-height:19px; overflow:auto; padding:6px 10px" bgcolor="#f8f8f8"><code style="background-color:transparent; border:none; border-radius:4px; font-size:16px; margin:0; padding:0; background:transparent; font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; overflow-y:hidden">$systemctl cat ceph-volume@lvm-0-b7b4fa98-d36e-430b-9789-a432a078292c
# /usr/lib/systemd/system/ceph-volume@.service
[Unit]
Description=Ceph Volume activation: %i
After=local-fs.target
Wants=local-fs.target

[Service]
Type=oneshot
KillMode=none
Environment=CEPH_VOLUME_TIMEOUT=10000
ExecStart=/bin/sh -c 'timeout $CEPH_VOLUME_TIMEOUT /usr/sbin/ceph-volume-systemd %i'
TimeoutSec=0
[Install]
WantedBy=multi-user.target</code></pre>


<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>可以看到， 他是把参数传递给了 <code style="background-color:#f8f8f8; border:1px solid #eaeaea; border-radius:4px; font-size:16px; margin:0 2px; padding:0 7px" bgcolor="#f8f8f8">ceph-volume-systemd</code> 命令， 而这个命令又把参数解析后，传给了 <code style="background-color:#f8f8f8; border:1px solid #eaeaea; border-radius:4px; font-size:16px; margin:0 2px; padding:0 7px" bgcolor="#f8f8f8">ceph-volume</code> 命令，最后的执行的命令是</p>
<pre class="highlight" style="color:rgb(33, 33, 33); font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; font-size:16px; margin:15px 0; min-height:1em; background-color:#f8f8f8; border:1px solid #ccc; border-radius:3px; line-height:19px; overflow:auto; padding:6px 10px" bgcolor="#f8f8f8"><code style="background-color:transparent; border:none; border-radius:4px; font-size:16px; margin:0; padding:0; background:transparent; font-family:Consolas, Monaco, andale mono, ubuntu mono, monospace; overflow-y:hidden">ceph-volume lvm trigger {osd id} {osd uuid]</code></pre>


<blockquote style='color:#bbb; font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em; border-left:4px solid #ddd; margin-left:17px; padding:0 15px'>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em; margin-top:0; margin-bottom:0'>需要<code style="background-color:#f8f8f8; border:1px solid #eaeaea; border-radius:4px; font-size:16px; margin:0 2px; padding:0 7px" bgcolor="#f8f8f8">ceph-volume-systemd</code> 这个命令的原因应该是systemd只能传一个参数</p>
</blockquote>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>这个 <code style="background-color:#f8f8f8; border:1px solid #eaeaea; border-radius:4px; font-size:16px; margin:0 2px; padding:0 7px" bgcolor="#f8f8f8">trigger</code> 会调用 <code style="background-color:#f8f8f8; border:1px solid #eaeaea; border-radius:4px; font-size:16px; margin:0 2px; padding:0 7px" bgcolor="#f8f8f8">ceph-volume lvm activate</code> 命令，去准备相对应挂载及里面的数据初始化。</p>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>最后， <code style="background-color:#f8f8f8; border:1px solid #eaeaea; border-radius:4px; font-size:16px; margin:0 2px; padding:0 7px" bgcolor="#f8f8f8">ceph-volume lvm activate</code> 会调用 <code style="background-color:#f8f8f8; border:1px solid #eaeaea; border-radius:4px; font-size:16px; margin:0 2px; padding:0 7px" bgcolor="#f8f8f8">ceph-bluestore-tool pirme-osd-dir</code> 命令来初始化里面的数据。</p>
<h2 id="_2" style="cursor:text; font-weight:bold; margin:20px 0 10px; padding:2px 0 0 10px; position:relative; border-left:solid 8px #299480; color:#3AAA7D; font-size:22px; line-height:1.6">其它</h2>
<h3 id="ceph-osd-purge" style="cursor:text; font-weight:bold; margin:20px 0 10px; padding:2px 0 0 10px; position:relative; border-left:solid 8px #1A95A5; color:#26c6da; font-size:18px; line-height:1.6">ceph osd purge</h3>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>ceph Limunous 新加了一个 <code style="background-color:#f8f8f8; border:1px solid #eaeaea; border-radius:4px; font-size:16px; margin:0 2px; padding:0 7px" bgcolor="#f8f8f8">ceph osd purge</code> 命令，很好用，可以一个命令，把某个 osd 相关的信息都清除掉。包括</p>
<ul style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em; padding-left:30px'>
<li style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em; margin-top:0'>osd</li>
<li style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em'>crush rule</li>
<li style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em'>auth key</li>
</ul>
<h3 id="ceph-disk-lvm" style="cursor:text; font-weight:bold; margin:20px 0 10px; padding:2px 0 0 10px; position:relative; border-left:solid 8px #1A95A5; color:#26c6da; font-size:18px; line-height:1.6">ceph-disk lvm</h3>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>ceph-disk 应试不支持 lvm 的， 参见 http://tracker.ceph.com/issues/5461</p>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'>不过 kolla 是否支持，可以验证下， 因为 kolla 的脚本里面不依赖 ceph-disk</p>
<h2 id="_3" style="cursor:text; font-weight:bold; margin:20px 0 10px; padding:2px 0 0 10px; position:relative; border-left:solid 8px #299480; color:#3AAA7D; font-size:22px; line-height:1.6">版本</h2>
<table style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em; border-collapse:collapse; padding:0'>
<thead>
<tr style="background-color:white; border-top:1px solid #ccc; margin:0; padding:0" bgcolor="white">
<th style="border:1px solid #ccc; font-weight:bold; margin:0; padding:6px 13px">时间</th>
<th style="border:1px solid #ccc; font-weight:bold; margin:0; padding:6px 13px">更新内容</th>
</tr>
</thead>
<tbody>
<tr style="background-color:white; border-top:1px solid #ccc; margin:0; padding:0" bgcolor="white">
<td style="border:1px solid #ccc; margin:0; padding:6px 13px">2018-04-07</td>
<td style="border:1px solid #ccc; margin:0; padding:6px 13px">初版</td>
</tr>
<tr style="background-color:white; border-top:1px solid #ccc; margin:0; padding:0" bgcolor="white">
<td style="border:1px solid #ccc; margin:0; padding:6px 13px">2018-11-25</td>
<td style="border:1px solid #ccc; margin:0; padding:6px 13px">增加 block.db 推荐大小值</td>
</tr>
<tr style="background-color:white; border-top:1px solid #ccc; margin:0; padding:0" bgcolor="white">
<td style="border:1px solid #ccc; margin:0; padding:6px 13px">2020-04-12</td>
<td style="border:1px solid #ccc; margin:0; padding:6px 13px">增加 block.db / block.wal 的配置</td>
</tr>
</tbody>
</table>
<div class="footnote" style="font-size:12px">
<hr style="border:0 none; color:#ccc; height:4px; padding:0; border-top:1px solid #8c8b8b" height="4">
<ol style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em; padding-left:30px'>
<li id="fn:1" style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em; margin-top:0'>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em; margin-top:0'><a href="https://www.slideshare.net/sageweil1/bluestore-a-new-storage-backend-for-ceph-one-year-in" style="color:#4183C4; margin-top:0">https://www.slideshare.net/sageweil1/bluestore-a-new-storage-backend-for-ceph-one-year-in</a> <a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text" style="color:#4183C4; display:none">↩</a></p>
</li>
<li id="fn:2" style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em'>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em; margin-top:0'><a href="http://lists.ceph.com/pipermail/ceph-users-ceph.com/2017-September/020822.html" style="color:#4183C4; margin-top:0">http://lists.ceph.com/pipermail/ceph-users-ceph.com/2017-September/020822.html</a> <a class="footnote-backref" href="#fnref:2" rev="footnote" title="Jump back to footnote 2 in the text" style="color:#4183C4; display:none">↩</a></p>
</li>
<li id="fn:3" style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em'>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em; margin-top:0'><a href="http://lists.ceph.com/pipermail/ceph-users-ceph.com/2017-September/021037.html" style="color:#4183C4; margin-top:0">http://lists.ceph.com/pipermail/ceph-users-ceph.com/2017-September/021037.html</a> <a class="footnote-backref" href="#fnref:3" rev="footnote" title="Jump back to footnote 3 in the text" style="color:#4183C4; display:none">↩</a></p>
</li>
<li id="fn:4" style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em'>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em; margin-top:0'><a href="http://docs.ceph.com/docs/master/rados/configuration/bluestore-config-ref/#sizing" style="color:#4183C4; margin-top:0">http://docs.ceph.com/docs/master/rados/configuration/bluestore-config-ref/#sizing</a> <a class="footnote-backref" href="#fnref:4" rev="footnote" title="Jump back to footnote 4 in the text" style="color:#4183C4; display:none">↩</a></p>
</li>
<li id="fn:5" style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em'>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em; margin-top:0'><a href="http://lists.ceph.com/pipermail/ceph-users-ceph.com/2018-September/029643.html" style="color:#4183C4; margin-top:0">http://lists.ceph.com/pipermail/ceph-users-ceph.com/2018-September/029643.html</a> <a class="footnote-backref" href="#fnref:5" rev="footnote" title="Jump back to footnote 5 in the text" style="color:#4183C4; display:none">↩</a></p>
</li>
<li id="fn:6" style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em'>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em; margin-top:0'><a href="http://www.sysnote.org/2016/08/19/ceph-bluestore/" style="color:#4183C4; margin-top:0">ceph存储引擎bluestore解析</a> <a class="footnote-backref" href="#fnref:6" rev="footnote" title="Jump back to footnote 6 in the text" style="color:#4183C4; display:none">↩</a></p>
</li>
<li id="fn:7" style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em'>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em; margin-top:0'><a href="https://ceph.com/community/new-luminous-bluestore/" style="color:#4183C4; margin-top:0">https://ceph.com/community/new-luminous-bluestore/</a> <a class="footnote-backref" href="#fnref:7" rev="footnote" title="Jump back to footnote 7 in the text" style="color:#4183C4; display:none">↩</a></p>
</li>
<li id="fn:8" style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em'>
<p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:0; min-height:1em; margin-top:0'><a href="http://liyichao.github.io/posts/ceph-bluestore-%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86.html" style="color:#4183C4; margin-top:0">ceph bluestore 基本原理</a> <a class="footnote-backref" href="#fnref:8" rev="footnote" title="Jump back to footnote 8 in the text" style="color:#4183C4; display:none">↩</a></p>
</li>
</ol>
</div>
    <p style='color:rgb(33, 33, 33); font-family:"Helvetica Neue", Helvetica, sans-serif; font-size:16px; margin:15px 0; min-height:1em'> 点击「阅读原文」，能看到更好的排版。 </p>
    <!--
      <div class="copyleft">
      <p>文档信息</p>
      <ul>
      <li> 版权声明：自由转载-非商用-非衍生-保持署名（创意共享3.0许可证）</li>
      <li> 作者： Jeffrey4l </li>
      <li> 发表日期： 2017年12月19日 </li>
      </div>
    -->
  </body>
</html>
